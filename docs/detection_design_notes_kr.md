# 탐지 설계 노트 (Detection Design Notes)

## 🎯 프로젝트 목표

단순 로그 수집을 넘어,  
공격 재현 → 로그 분석 → 탐지 기준 설계 → 자동 대응까지  
End-to-End SOC 환경을 직접 구축하는 것을 목표로 하였습니다.

---

## 🧠 핵심 탐지 설계 원칙

### 1️⃣ 단일 이벤트 기반 탐지를 지양한다

- 로그인 실패 1회는 사용자 실수일 가능성이 높음
- 단일 이벤트 Alert는 오탐(False Positive) 발생 확률이 높음
- 따라서 Threshold 기반 집계 탐지를 적용

---

### 2️⃣ 임계값(Threshold) 기반 집계 사용

- 일정 시간 내 반복 발생 여부를 기준으로 탐지
- 예:
  - SSH 실패 3회 이상
  - 5분 내 다수 포트 접근

이는 정상 행위와 공격 행위를 구분하기 위한 전략적 설계임.

---

### 3️⃣ Unique 값 집계 활용 (Port Scan 탐지)

- 단순 트래픽 수 증가가 아닌
- 서로 다른 포트(destination.port) 접근 여부를 기준으로 탐지

예:
- unique destination.port ≥ 10

이를 통해 반복 접속과 스캐닝 행위를 구분.

---

### 4️⃣ 오탐(False Positive) 최소화 고려

탐지 설계 시 다음을 고려함:

- 정상 사용자 행위 가능성
- 내부 테스트 트래픽
- 관리자의 실수 로그인
- 특정 서비스 특성

Threshold 조정을 통해 탐지 정확도를 개선함.

---

### 5️⃣ 탐지 이후 대응 자동화 고려

보안 관제는 탐지로 끝나지 않음.

- Alert → Webhook → Python SOAR → UFW 자동 차단

자동화된 대응 체계를 설계하여  
“탐지 중심”이 아닌 “탐지 + 대응” 관점으로 확장함.

---

## 🔍 SIEM 플랫폼 비교를 통한 학습

Elastic과 Splunk를 모두 사용하며 다음을 비교함:

- 룰 작성 방식 차이
- 집계 방식 차이
- UI 및 Alert 관리 방식
- 쿼리 언어 차이 (KQL vs SPL)

이를 통해 특정 SIEM에 종속되지 않는  
탐지 설계 사고력을 기름.

---

## 🔐 실습을 통해 얻은 인사이트

- 원시 로그는 바로 탐지에 사용하기 어렵다.
- 필드 파싱과 정규화가 중요하다.
- 탐지 로직 설계는 단순 문법 문제가 아니다.
- 오탐을 줄이는 사고가 핵심이다.
- 자동 대응까지 고려해야 실무형 관제 설계가 된다.

---

## 📌 결론

이 프로젝트는 단순 실습이 아니라,

- 공격 재현 능력
- 로그 분석 능력
- 탐지 기준 설계 능력
- SIEM 이해도
- 자동 대응 확장 설계 경험

을 포함한 실무형 SOC 환경 구축 경험임.
